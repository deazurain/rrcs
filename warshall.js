var file = ";s0;s1;s2;s3;s4;s5;s6;s7;e0;e1;e2;e3;e4;e5;e6;e7\n\
s0;0;9999;9999;9999;9999;9999;9999;9999;0;9999;9999;9999;9999;9999;9999;10\n\
s1;9999;0;9999;9999;9999;9999;9999;9999;0;3;9999;9999;9999;9999;9999;9999\n\
s2;9999;9999;0;9999;9999;9999;9999;9999;0;9999;2;9999;9999;9999;9999;9999\n\
s3;9999;9999;9999;0;9999;9999;9999;9999;9999;0;9999;2;9999;9999;9999;9999\n\
s4;9999;9999;9999;9999;0;9999;9999;9999;9999;9999;0;9999;1;9999;9999;9999\n\
s5;9999;9999;9999;9999;9999;0;9999;9999;0;9999;9999;9999;9999;5;9999;9999\n\
s6;9999;9999;9999;9999;9999;9999;0;9999;9999;9999;9999;0;0;0;1;9999\n\
s7;9999;9999;9999;9999;9999;9999;9999;0;9999;9999;9999;9999;9999;9999;0;0\n\
e0;0;9999;9999;9999;9999;9999;9999;9999;0;9999;9999;9999;9999;9999;9999;9999\n\
e1;9999;-3;9999;9999;9999;9999;9999;9999;9999;0;9999;9999;9999;9999;9999;9999\n\
e2;9999;9999;-2;9999;9999;9999;9999;9999;9999;9999;0;9999;9999;9999;9999;9999\n\
e3;9999;9999;9999;-2;9999;9999;9999;9999;9999;9999;9999;0;9999;9999;9999;9999\n\
e4;9999;9999;9999;9999;-1;9999;9999;9999;9999;9999;9999;9999;0;9999;9999;9999\n\
e5;9999;9999;9999;9999;9999;-5;9999;9999;9999;9999;9999;9999;9999;0;9999;9999\n\
e6;9999;9999;9999;9999;9999;9999;-1;9999;9999;9999;9999;9999;9999;9999;0;9999\n\
e7;0;9999;9999;9999;9999;9999;9999;0;9999;9999;9999;9999;9999;9999;9999;0"

function parseFile(f) {
    var matrix = Array();
    var lines = f.split(/\r\n|\n/);
    
    for(var i = 1; i < lines.length; i++) {
        matrix[i-1] = new Array();
        
        var fields = lines[i].split(";");
        for(var j = 1; j < fields.length; j++)
            matrix[i-1][j-1] = parseInt(fields[j])
    }
    return matrix;
}

function warshall(dist) {
    for(var k = 0; k < dist.length; k++) {
        for(var i = 0; i < dist.length; i++) {
            for(var j = 0; j < dist.length; j++) {
                if(dist[i][k] + dist[k][j] < dist[i][j] && dist[i][k] != 9999 && dist[k][j] != 9999)
                    dist[i][j] = dist[i][k] + dist[k][j];
            }
        }
    }
    
    return dist;
}

function showTable(table) {
    var output = ""
    for(row in table) {
        for(field in table[row])
            output += table[row][field] + "\t"
        
        output += "\n";
    }
    
    console.log(output);
}

//Parse the file
var parsed = parseFile(file);
console.log("File parsed: ", parsed)

//Solution
var sol = warshall(parsed);
console.log("Solution: ", sol);

//Show the solution
console.log(showTable(sol));
